<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sleep Cycle App</title>

  <!-- Bootstrap -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.0.2/css/bootstrap.min.css" rel="stylesheet">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Lobster&family=Roboto:wght@400;700&family=Pacifico&family=Comfortaa:wght@300&family=Oswald:wght@500&family=Permanent+Marker&display=swap" rel="stylesheet">

  <!-- Custom Styles -->
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div id="app">

    <!-- LOGIN COVER -->
    <div id="loginCover" class="login-cover d-flex align-items-center justify-content-center">
      <div class="card p-4 shadow" style="max-width: 400px; width: 100%; border-radius: 15px;">
        <h3 class="text-center mb-3" id="formTitle">Sign Up</h3>

        <form id="authForm">
          <div class="mb-3">
            <label class="form-label">Email</label>
            <input id="emailInput" type="email" class="form-control" required>
          </div>

          <div class="mb-3">
            <label class="form-label">Password</label>
            <input id="passwordInput" type="password" class="form-control" required>
          </div>

          <div class="mb-3" id="repeatPasswordField">
            <label class="form-label">Repeat Password</label>
            <input id="passwordVerifiedInput" type="password" class="form-control" required>
            <div class="form-text text-danger" id="passwordMismatch" style="display: none;">
              Passwords must match.
            </div>
          </div>

          <div class="form-check mb-3" id="termsCheckboxField">
            <input class="form-check-input" type="checkbox" id="termsCheck">
            <label class="form-check-label" for="termsCheck">
              I agree to the terms of service.
            </label>
            <div class="form-text text-danger" id="termsUncheckedMsg" style="display: none;">
              Please agree to the terms to continue.
            </div>
          </div>

          <button type="submit" class="btn btn-primary w-100 mb-2" id="submitBtn">
            Sign Up
          </button>

          <button type="button" class="btn btn-outline-danger w-100 mb-2" id="googleSignInBtn">
            <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" style="width: 20px; margin-right: 8px;">
            Sign in with Google
          </button>

          <p class="text-center mt-3">
            <a href="#" id="switchModeLink">Already have an account? Log In</a>
          </p>
        </form>
      </div>
    </div>

    <!-- APP MAIN CONTENT -->
    <div id="mainApp" style="display: none;">
      <h1><strong>The Sleep Cycle</strong></h1>
      <hr>

      <!-- 選擇睡眠階段 -->
      <div class="selector-container">
        <label for="stageSelect">Select Sleep Stage:</label>
        <select id="stageSelect">
          <option value="default">Default</option>
          <option value="awake">😀 Awake</option>
          <option value="light-sleep">😪 Light Sleep</option>
          <option value="deep-sleep">😴 Deep Sleep</option>
          <option value="dream">🤩 Dream</option>
          <option value="all">🌙 Show All</option>
        </select>
      </div>

      <!-- 卡片容器 -->
      <div class="cards-container" id="cardsContainer">
        <!-- 卡片將由 JS 動態插入 -->
      </div>

      <!-- 睡眠追蹤表單 -->
      <h2><strong>The Sleep Cycle Tracker</strong></h2>
      <hr>
      <div class="form-card">
        <h3>Sleep Data</h3>
        <p id="formStageIndicator" style="font-weight: bold; color: #504766; text-align: center; margin-bottom: 15px;">
          You are entering data for: <span id="stageName">None</span>
        </p>
        <form id="sleepDataForm">
          <label>Sleep Time (hrs):</label>
          <input id="sleepTimeInput" type="number" step="0.1" placeholder="e.g. 7.5" required>

          <label>Turn Overs:</label>
          <input id="turnOversInput" type="number" placeholder="e.g. 2" required>

          <label>Heartbeat:</label>
          <input id="heartbeatInput" type="number" placeholder="e.g. 90 BPM" required>

          <button type="submit" id="saveDataBtn">Save Data</button>
        </form>
      </div>

      <!-- 音樂播放 -->
      <h4><strong>Sleep Sounds</strong></h4>
      <hr>
      <div class="sound-buttons">
        <button data-sound="rain">🌧 Rain</button>
        <button data-sound="ocean">🌊 Ocean</button>
        <button data-sound="forest">🌲 Forest</button>
        <button data-sound="fire">🔥 Fireplace</button>
      </div>
      <audio id="player" style="display:none"></audio>
      <button id="stopSoundBtn" class="stop">Music Stop</button>

      <!-- 歷史紀錄 -->
      <div class="sleep-history">
        <h3>Sleep Records</h3>
        <ul id="recordList">
          <!-- 歷史資料將由 JS 插入 -->
        </ul>
      </div>

      <button id="logoutBtn">Logout</button>
    </div>
  </div>

  <!-- 你的 main.js -->
  <script type="module" src="main.js"></script>
</body>
</html>
